<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:task="http://www.springframework.org/schema/task"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
		http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.1.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.0.xsd">
	
	<!-- Mapping Parse Beans-->
	<bean name="parseCalendario" id="parseCalendario" class="com.fantagame.be.business.data.dataload.parse.ParseCalendario">
		<property name="campionato" value="ITALIA"/>
		<property name="categoria" value="SERIE A" />
		<property name="daoSquadra" ref="realSqudraDao"/>
	</bean>
	<bean name="parseSGR" id="parseSGR" class="com.fantagame.be.business.data.dataload.parse.SGRParseExcel">
		<property name="columnId" 		value="0" />
		<property name="columnNome" 	value="1" />
		<property name="columnRuolo" 	value="2" /> 
		<property name="columnSquadra"	value="3" />
		<property name="columnQuota" 	value="4" />		
		<property name="columns" 		value="5" />		
		<property name="stratRow" 		value="4" />
	</bean>
	<bean name="parseVoti" id="parseVoti" class="com.fantagame.be.business.data.dataload.parse.ParseVotiExcel">
		<property name="stratRow" value="4"/>
		<property name="columnId" value="0"/>
		<property name="columnVG" value="4"/>
		<property name="columnGolSub" value="6"/>
		<property name="columnGolFat" value="5"/>
		<property name="columnVCDS" value="9"/>
		<property name="columnAmm" value="21"/>
		<property name="columnEsp" value="22"/>
		<property name="columnTitolare" value="29"/>
		<property name="columnFVG" value="30"/>
		<property name="columnFVCDS" value="31"/>
		<property name="rowColumnGiornata" value="(1,0)"/>
	</bean>
	
	<!-- Mapping Load Beans -->
	<bean name ="loadCalendario" id="LoadCalendario" class="com.fantagame.be.business.data.dataload.LoadCalendario">		
		<property name="parse" ref="parseCalendario"/>
		<property name="dao" ref="calendarioDao"/>
	</bean>
	<bean name ="loadSGR" id="loadSGR" class="com.fantagame.be.business.data.dataload.LoadSGR">
		<property name="parse" 			ref="parseSGR"/>
		<property name="zip" 			value="false"/>
		<property name="daoGiocatore" 	ref="giocatoreDao"/>
		<property name="daoRealSquadra" ref="realSqudraDao"/>
		<property name="daoRuolo" 		ref="ruoloDao"/>
	</bean>
	<bean name ="loadVoti" id="loadVoti" class="com.fantagame.be.business.data.dataload.LoadVoti">
		<property name="parse" 			ref="parseVoti"/>
		<property name="andamentoDao" 	ref="andamentoDao"/>		
	</bean>
	
	
	<bean name="checkFile" id="checkFile" class="com.fantagame.be.business.data.dataload.CheckLoad">
		<property name="sourceFolder" 			value="classpath:FileData"/>
		<property name="destinationFolder" 		value="classpath:FileData\loaded"/>
		<property name="SGRFile" 				value="true"/>
		<property name="fileNameMap" >
			<map>
				<entry>
					<key><util:constant static-field="com.fantagame.be.business.data.dataload.CheckLoad.SGR"/></key>
					<value>SGR.xls</value>
				</entry>
				<entry>
					<key><util:constant static-field="com.fantagame.be.business.data.dataload.CheckLoad.CALENDARIO"/></key>
					<value>calendario.xls</value>
				</entry>
				<entry>
					<key><util:constant static-field="com.fantagame.be.business.data.dataload.CheckLoad.ANDAMENTO"/></key>
					<value>voti.xls</value>
				</entry>	
			</map>
		</property>
		<property name="dataloadMap" >
			<map>
			<entry>
				<key><util:constant static-field="com.fantagame.be.business.data.dataload.CheckLoad.SGR"/></key>
				<ref bean="loadSGR"/>
			</entry>	
			<entry>
				<key><util:constant static-field="com.fantagame.be.business.data.dataload.CheckLoad.CALENDARIO"/></key>
				<ref bean="loadCalendario"/>
			</entry>
			<entry>
				<key><util:constant static-field="com.fantagame.be.business.data.dataload.CheckLoad.ANDAMENTO"/></key>
				<ref bean="loadVoti"/>
			</entry>
			</map>
		</property>
	</bean>
	
	<task:scheduled-tasks>
   		<task:scheduled ref="checkFile" method="check"  cron="0/10 * * * * *" />
	</task:scheduled-tasks>
	
	
</beans>
